@using Cimon.Data
@using Microsoft.AspNetCore.Components

<div class="build-info-item @GetClasses()">
    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.SpaceBetween">
         <RadzenStack Orientation="Orientation.Vertical" Gap="0.5em">
             <RadzenText TextStyle="TextStyle.H4" Style="color: white" Text="@Info.Name"></RadzenText>
             <RadzenText TextStyle="TextStyle.H5" Style="color: white" Text="@GetStatus()"></RadzenText>
            </RadzenStack>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Normal" >
            @if (Info.Status == BuildStatus.Failed) {
                foreach (var user in Info.CommitterUsers) {
                    <RadzenStack class="committer"
                        Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Right"
                        AlignItems="AlignItems.Center" Gap="0">
                        <RadzenGravatar Email="@user.Email">@user.UserName</RadzenGravatar>
                        <RadzenText Text="@user.UserName" Style="color: white"></RadzenText>
                    </RadzenStack>
                }
            }
        </RadzenStack>
    </RadzenStack>
</div>
@code {

    [Parameter]
    public BuildInfo? Info { get; set; }

    private string GetStatus() => string.IsNullOrWhiteSpace(Info.StatusText) ? Info.Status.ToString() : Info.StatusText;

    private string GetClasses() => Info.Status == BuildStatus.Failed ? "failed" : "";

}
