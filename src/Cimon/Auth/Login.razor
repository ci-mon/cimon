@page "/Login"
@layout EmptyLayout

<RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center">
    <RadzenCard class="rz-my-12 rz-mx-auto rz-p-4 rz-p-md-12" style="max-width: 600px; margin: 2em !important;">
        <RadzenProgressBar Visible="@_showProgressBar" ProgressBarStyle="ProgressBarStyle.Primary" Value="100" ShowValue="false" Mode="ProgressBarMode.Indeterminate" />
        <RadzenTemplateForm Visible="@(!_showProgressBar)" Data=@("SimpleLogin") Submit="@((string _) => OnSubmit())" Action="/auth/login" Method="POST">
            <RadzenLogin AllowRegister="false" AllowResetPassword="false"/>
        </RadzenTemplateForm>
        @if (Error != null) {
            <RadzenAlert Style="max-width: 25em;" Close="() => { Error = null;}" AllowClose="true" AlertStyle="AlertStyle.Danger" Variant="Variant.Flat" Shade="Shade.Lighter">
                User with such name and/or password is not found
            </RadzenAlert>
        } else {
            <RadzenAlert  AllowClose="false" AlertStyle="AlertStyle.Success" Variant="Variant.Flat" Shade="Shade.Lighter">
                cimon doesn't store your password
            </RadzenAlert>
        }
    </RadzenCard>
</RadzenStack>
@code {

    private bool _showProgressBar;
    
    [SupplyParameterFromQuery(Name = "error")]
    public string? Error { get; set; }
    private void OnSubmit() {
        Error = null;
        _showProgressBar = true;
    }

}
